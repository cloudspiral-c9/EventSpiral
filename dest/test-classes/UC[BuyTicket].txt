結合テスト項目表
[作成日時] 2014/8/21 13:58
[作成者] 鷹取敏志(2014016)

[シナリオID] BuyTicket
[ユースケース名] チケットを購入する
[シナリオ概要] ユーザがチケットを購入できるか確認する。

[テスト項目数]

[データベース及びドキュメント]

[結合テスト実施前]
* tem.account
ID			Password	Role 			sessionId
-----------------------------------------------------------------------------------------
"admin"     "admin"     "administrator" ""
"promoter1" "promoter1" "promoter" 		""
"user0"     "pass0"     "user"     		""
"user1"     "pass1"     "user"     		""
"user2"     "pass2"     "user"     		""
-----------------------------------------------------------------------------------------

* tem.event
eventId		eventName	eventDate		ticketStartDate		description	promoterId
totalSeats
-----------------------------------------------------------------------------------------
"000"	"event0"		"2014/10/1 00:00"	"2014/8/1 00:00"	"desc0"		"promoter1"
"{“seatName" : "S", "fee" : 50000, "count": 1 },
{"seatName" : "A", "fee" : 10000, "count" : 2 }"
"001"	"event1"		"2014/10/1 00:00"	"2014/9/1 00:00"	"desc0"		"promoter1"
"{“seatName" : "S", "fee" : 50000, "count": 1 }"


* tem.ticket
eventId		evnetName	eventDate		ticketStartDate		seatName	fee		owner	status
-----------------------------------------------------------------------------------------
"000"	"event0"	"2014/10/1 00:00"	"2014/8/1 00:00"	"S"			"50000"		""		""
"000"	"event0"	"2014/10/1 00:00"	"2014/8/1 00:00"	"A"			"10000"		""		""
"000"	"event0"	"2014/10/1 00:00"	"2014/8/1 00:00"	"A"			"10000"		""		""
"001"	"event1"	"2014/10/1 00:00"	"2014/9/1 00:00"	"S"			"50000"		""		""


[結合テスト実施後]
* tem.account
変化なし

* tem.event
eventId		eventName	eventDate		ticketStartDate		description	promoterId
totalSeats
-----------------------------------------------------------------------------------------
"000"	"event0"		"2014/10/1 00:00"	"2014/8/1 00:00"	"desc0"		"promoter1"
"{“seatName" : "S", "fee" : 50000, "count": 1},
 {"seatName" : "A", “fee" : 10000, "count": 2}"
"001"	"event1"		"2014/10/1 00:00"	"2014/9/1 00:00"	"desc0"		"promoter1"
"{“seatName" : "S", "fee" : 50000, "count": 1 }"

* tem.ticket
eventId		evnetName	eventDate		ticketStartDate		seatName	fee		owner	status
-----------------------------------------------------------------------------------------
"000"	"event0"	"2014/10/1 00:00"	"2014/8/1 00:00"	"S"			"50000"		"user0"		"pass0"
"000"	"event0"	"2014/10/1 00:00"	"2014/8/1 00:00"	"A"			"10000"		""		""
"000"	"event0"	"2014/10/1 00:00"	"2014/8/1 00:00"	"A"			"10000"		""		""
"001"	"event1"	"2014/10/1 00:00"	"2014/9/1 00:00"	"S"			"50000"		""		""


1.
[概要] チケット購入確認画面が表示されることを確認する
[条件] 開始ページのURLを入力する.
		http://133.1.236.131:8601/EventSpiral/index.html
		user0/pass0でログインする.
		表示された画面でイベント名"event0"をクリックする.
		イベント詳細画面が表示されることを確認後，
		シート種類:"S", 枚数:"1"と指定し，購入ボタンを押す.
[確認項目] チケット購入確認画面が表示され，座席種別と購入枚数が正しいことを確認する

2.
[概要] チケット購入数が0以下の場合にエラーメッセージが表示されるかを確認する
[条件] 項目1.でイベント詳細画面を表示後，
		シート種類:"S", 枚数:"0"と指定し，購入ボタンを押す.
[確認項目] 「チケット数には1以上の整数を入力してください」というメッセージが表示されるか確認する

3.
[概要] チケット購入数が整数以外の場合にエラーメッセージが表示されるかを確認する
[条件] 項目1.でイベント詳細画面を表示後，
		シート種類:"S", 枚数:"1.1"と指定し，購入ボタンを押す.
[確認項目] 「チケット数には1以上の整数を入力してください」というメッセージが表示されるか確認する

4.
[概要] チケット購入ができることを確認する
[条件] 項目1.の確認後，チケット購入確認画面でOKボタンを押す.
[確認項目] イベント詳細画面が表示され，イベント名:"event0"の残席数が"0"，購入数が"1"になっていることを確認する

5.
[概要] チケット購入をキャンセルできることを確認する
[条件] 項目1.の確認後，チケット購入確認画面でキャンセルボタンを押す.
[確認項目] イベント詳細画面が表示され，イベント名:"event0"の残席数が"1"，購入数が"0"になっていることを確認する

6.
[概要] チケット購入数が0以下の場合にエラーメッセージが表示されるかを確認する(サーバーサイド)
[条件] eventDetail.htmlのJavaScriptにおいて
		購入チケット枚数が1以上の整数であることを検査する部分をコメントアウト
		項目1.でイベント詳細画面を表示後，
		シート種類:"S", 枚数:"0"と指定し，購入ボタンを押す.
[確認項目] 「チケット数には1以上の整数を入力してください」というメッセージが表示されるか確認する
[注意] テストが成功したことを確認後コメント外すこと

7.
[概要] チケット購入数が整数以外の場合にエラーメッセージが表示されるかを確認する(サーバーサイド)
[条件] eventDetail.htmlのJavaScriptにおいて
		購入チケット枚数が1以上の整数であることを検査する部分をコメントアウト
		項目1.でイベント詳細画面を表示後，
		シート種類:"S", 枚数:"1.1"と指定し，購入ボタンを押す.
[確認項目] 「チケット数には1以上の整数を入力してください」というメッセージが表示されるか確認する
[注意] テストが成功したことを確認後コメント外すこと

8.
[概要] ユーザがログインしていない場合にエラーメッセージが表示されるかを確認する
[条件] 項目1.でイベント詳細画面を表示後，
		ログアウトボタンを押す.
		シート種類:"S", 枚数:"1"と指定し，購入ボタンを押す.
[確認項目] 「ログインしてください」というメッセージが表示されるか確認する

9.
[概要] イベントが存在していない場合にエラーメッセージが表示されるかを確認する
[条件] 項目1.でイベント詳細画面を表示後，
		tem.eventを初期化する
		[初期化前]
		=========================================================================================
		* tem.event
		eventId		eventName	eventDate		ticketStartDate		description	promoterId
		totalSeats
		-----------------------------------------------------------------------------------------
		"000"	"event0"		"2014/10/1 00:00"	"2014/8/1 00:00"	"desc0"		"promoter1"
		"{“seatName" : "S", "fee" : 50000, "count": 1 },
		 {"seatName" : "A", "fee" : 10000, "count" : 2 }"
		"001"	"event1"		"2014/10/1 00:00"	"2014/9/1 00:00"	"desc0"		"promoter1"
		"{“seatName" : "S", "fee" : 50000, "count": 1 }"
		=========================================================================================
		[初期化後]
		イベントなし

		その後，シート種類:"S", 枚数:"1"と指定し，購入ボタンを押す.
[確認項目] 「指定されたイベントが存在しません」というメッセージが表示されるか確認する

10.
[概要] チケットが販売開始されていない場合にエラーメッセージが表示されるかを確認する
[条件] 項目1.で"event1"をクリックしイベント詳細画面を表示後，
		シート種類:"S", 枚数:"1"と指定し，購入ボタンを押す.
[確認項目] 「まだ販売が開始されていません」というメッセージが表示されるか確認する

11.
[概要] 指定された座席種別が存在していない場合にエラーメッセージが表示されるかを確認する
[条件] 項目1.イベント詳細画面を表示後，
		tem.ticketのeventId:"000"の seatName"S"のレコードを削除する
		[削除前]
		=========================================================================================
		* tem.ticket
		eventId		evnetName	eventDate		ticketStartDate		seatName	fee		owner	status
		-----------------------------------------------------------------------------------------
		"000"	"event0"	"2014/10/1 00:00"	"2014/8/1 00:00"	"S"			"50000"		""		""
		"000"	"event0"	"2014/10/1 00:00"	"2014/8/1 00:00"	"A"			"10000"		""		""
		"000"	"event0"	"2014/10/1 00:00"	"2014/8/1 00:00"	"A"			"10000"		""		""
		"001"	"event1"	"2014/10/1 00:00"	"2014/9/1 00:00"	"S"			"50000"		""		""

		[削除後]
		=========================================================================================
		* tem.ticket
		eventId		evnetName	eventDate		ticketStartDate		seatName	fee		owner	status
		-----------------------------------------------------------------------------------------
		"000"	"event0"	"2014/10/1 00:00"	"2014/8/1 00:00"	"A"			"10000"		""		""
		"000"	"event0"	"2014/10/1 00:00"	"2014/8/1 00:00"	"A"			"10000"		""		""
		"001"	"event1"	"2014/10/1 00:00"	"2014/9/1 00:00"	"S"			"50000"		""		""

		その後，シート種類:"S", 枚数:"1"と指定し，購入ボタンを押す.
[確認項目] 「座席種別名が正しくありません」というメッセージが表示されるか確認する


12.
[概要] チケット購入枚数が残席数より少ない場合にエラーメッセージが表示されるかを確認する
[条件] 項目1.でイベント詳細画面を表示後，
		シート種類:"S", 枚数:"2"と指定し，購入ボタンを押す.
[確認項目] 「残席数が足りません」というメッセージが表示されるか確認する
































